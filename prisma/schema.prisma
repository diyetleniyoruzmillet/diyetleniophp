// Diyetlenio - Prisma Schema
// Node.js + TypeScript Migration

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ============================================
// CORE MODELS
// ============================================

enum UserType {
  admin
  dietitian
  client
}

enum Gender {
  male
  female
  other
}

model User {
  id                      Int       @id @default(autoincrement()) @db.UnsignedInt
  email                   String    @unique @db.VarChar(255)
  password                String    @db.VarChar(255)
  fullName                String    @map("full_name") @db.VarChar(255)
  phone                   String?   @db.VarChar(20)
  userType                UserType  @map("user_type")
  profilePhoto            String?   @map("profile_photo") @db.VarChar(255)
  isActive                Boolean   @default(false) @map("is_active") @db.TinyInt
  isEmailVerified         Boolean   @default(false) @map("is_email_verified") @db.TinyInt
  emailVerificationToken  String?   @map("email_verification_token") @db.VarChar(255)
  passwordResetToken      String?   @map("password_reset_token") @db.VarChar(255)
  passwordResetExpires    DateTime? @map("password_reset_expires") @db.DateTime
  lastLogin               DateTime? @map("last_login") @db.DateTime
  createdAt               DateTime  @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt               DateTime  @updatedAt @map("updated_at") @db.Timestamp(0)

  // Relations
  dietitianProfile        DietitianProfile?
  clientHealthInfo        ClientHealthInfo?
  appointmentsAsDietitian Appointment[]       @relation("DietitianAppointments")
  appointmentsAsClient    Appointment[]       @relation("ClientAppointments")
  emergencyCalls          EmergencyCall[]     @relation("ClientEmergencyCalls")
  adminEmergencyCalls     EmergencyCall[]     @relation("AdminEmergencyCalls")
  sentMessages            Message[]           @relation("SentMessages")
  receivedMessages        Message[]           @relation("ReceivedMessages")
  dietPlansAsClient       DietPlan[]          @relation("ClientDietPlans")
  dietPlansAsDietitian    DietPlan[]          @relation("DietitianDietPlans")
  clientNotes             ClientNote[]        @relation("ClientNotes")
  dietitianNotes          ClientNote[]        @relation("DietitianNotes")
  articles                Article[]
  articleLikes            ArticleLike[]
  articleComments         ArticleComment[]
  recipes                 Recipe[]
  recipeLikes             RecipeLike[]
  recipeComments          RecipeComment[]
  reviews                 Review[]            @relation("ClientReviews")
  reviewsReceived         Review[]            @relation("DietitianReviews")
  notifications           Notification[]
  availability            Availability[]
  payments                Payment[]           @relation("ClientPayments")
  commissions             Commission[]

  @@index([email], map: "idx_email")
  @@index([userType], map: "idx_user_type")
  @@index([isActive], map: "idx_active")
  @@map("users")
}

model DietitianProfile {
  id                Int       @id @default(autoincrement()) @db.UnsignedInt
  userId            Int       @unique @map("user_id") @db.UnsignedInt
  title             String?   @db.VarChar(100)
  specialization    String?   @db.Text
  experienceYears   Int?      @map("experience_years") @db.UnsignedInt
  aboutMe           String?   @map("about_me") @db.Text
  education         String?   @db.Text
  certificates      String?   @db.Text
  diplomaFile       String?   @map("diploma_file") @db.VarChar(255)
  certificateFiles  String?   @map("certificate_files") @db.Text
  iban              String?   @db.VarChar(34)
  consultationFee   Decimal   @default(0) @map("consultation_fee") @db.Decimal(10, 2)
  isApproved        Boolean   @default(false) @map("is_approved") @db.TinyInt
  approvalDate      DateTime? @map("approval_date") @db.DateTime
  rejectionReason   String?   @map("rejection_reason") @db.Text
  ratingAvg         Decimal   @default(0) @map("rating_avg") @db.Decimal(3, 2)
  ratingCount       Int       @default(0) @map("rating_count") @db.UnsignedInt
  totalClients      Int       @default(0) @map("total_clients") @db.UnsignedInt
  totalSessions     Int       @default(0) @map("total_sessions") @db.UnsignedInt
  createdAt         DateTime  @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt         DateTime  @updatedAt @map("updated_at") @db.Timestamp(0)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([isApproved], map: "idx_approved")
  @@index([ratingAvg], map: "idx_rating")
  @@map("dietitian_profiles")
}

// ============================================
// APPOINTMENT SYSTEM
// ============================================

enum AppointmentStatus {
  scheduled
  completed
  cancelled
  no_show
}

model Availability {
  id          Int      @id @default(autoincrement()) @db.UnsignedInt
  dietitianId Int      @map("dietitian_id") @db.UnsignedInt
  dayOfWeek   Int      @map("day_of_week") @db.TinyInt /// 0=Sunday, 1=Monday, ..., 6=Saturday
  startTime   String   @map("start_time") @db.Time
  endTime     String   @map("end_time") @db.Time
  isActive    Boolean  @default(true) @map("is_active") @db.TinyInt
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamp(0)

  dietitian User @relation(fields: [dietitianId], references: [id], onDelete: Cascade)

  @@index([dietitianId, dayOfWeek], map: "idx_dietitian_day")
  @@map("availability")
}

model Appointment {
  id                 Int               @id @default(autoincrement()) @db.UnsignedInt
  dietitianId        Int               @map("dietitian_id") @db.UnsignedInt
  clientId           Int               @map("client_id") @db.UnsignedInt
  appointmentDate    DateTime          @map("appointment_date") @db.Date
  startTime          String            @map("start_time") @db.Time
  endTime            String            @map("end_time") @db.Time
  duration           Int               @default(45) @db.UnsignedInt /// Minutes
  status             AppointmentStatus @default(scheduled)
  isFirstSession     Boolean           @default(false) @map("is_first_session") @db.TinyInt
  isPaid             Boolean           @default(false) @map("is_paid") @db.TinyInt
  paymentAmount      Decimal?          @map("payment_amount") @db.Decimal(10, 2)
  notes              String?           @db.Text
  cancellationReason String?           @map("cancellation_reason") @db.Text
  cancelledBy        Int?              @map("cancelled_by") @db.UnsignedInt
  cancelledAt        DateTime?         @map("cancelled_at") @db.DateTime
  reminderSent       Boolean           @default(false) @map("reminder_sent") @db.TinyInt
  createdAt          DateTime          @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt          DateTime          @updatedAt @map("updated_at") @db.Timestamp(0)

  dietitian User      @relation("DietitianAppointments", fields: [dietitianId], references: [id], onDelete: Cascade)
  client    User      @relation("ClientAppointments", fields: [clientId], references: [id], onDelete: Cascade)
  messages  Message[]

  @@index([dietitianId], map: "idx_dietitian")
  @@index([clientId], map: "idx_client")
  @@index([appointmentDate], map: "idx_date")
  @@index([status], map: "idx_status")
  @@map("appointments")
}

enum EmergencyStatus {
  pending
  ongoing
  completed
  cancelled
}

model EmergencyCall {
  id        Int             @id @default(autoincrement()) @db.UnsignedInt
  clientId  Int             @map("client_id") @db.UnsignedInt
  adminId   Int?            @map("admin_id") @db.UnsignedInt
  status    EmergencyStatus @default(pending)
  roomId    String?         @unique @map("room_id") @db.VarChar(255)
  startedAt DateTime?       @map("started_at") @db.DateTime
  endedAt   DateTime?       @map("ended_at") @db.DateTime
  duration  Int?            @db.UnsignedInt
  notes     String?         @db.Text
  createdAt DateTime        @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt DateTime        @updatedAt @map("updated_at") @db.Timestamp(0)

  client User  @relation("ClientEmergencyCalls", fields: [clientId], references: [id], onDelete: Cascade)
  admin  User? @relation("AdminEmergencyCalls", fields: [adminId], references: [id], onDelete: SetNull)

  @@index([status], map: "idx_status")
  @@index([clientId], map: "idx_client")
  @@map("emergency_calls")
}

// ============================================
// MESSAGING & CLIENT TRACKING
// ============================================

model Message {
  id            Int       @id @default(autoincrement()) @db.UnsignedInt
  appointmentId Int       @map("appointment_id") @db.UnsignedInt
  senderId      Int       @map("sender_id") @db.UnsignedInt
  receiverId    Int       @map("receiver_id") @db.UnsignedInt
  message       String    @db.Text
  isRead        Boolean   @default(false) @map("is_read") @db.TinyInt
  readAt        DateTime? @map("read_at") @db.DateTime
  createdAt     DateTime  @default(now()) @map("created_at") @db.Timestamp(0)

  appointment Appointment @relation(fields: [appointmentId], references: [id], onDelete: Cascade)
  sender      User        @relation("SentMessages", fields: [senderId], references: [id], onDelete: Cascade)
  receiver    User        @relation("ReceivedMessages", fields: [receiverId], references: [id], onDelete: Cascade)

  @@index([appointmentId], map: "idx_appointment")
  @@index([receiverId, isRead], map: "idx_unread")
  @@map("messages")
}

model DietPlan {
  id          Int       @id @default(autoincrement()) @db.UnsignedInt
  clientId    Int       @map("client_id") @db.UnsignedInt
  dietitianId Int       @map("dietitian_id") @db.UnsignedInt
  title       String    @db.VarChar(255)
  description String?   @db.Text
  filePath    String?   @map("file_path") @db.VarChar(255)
  startDate   DateTime? @map("start_date") @db.Date
  endDate     DateTime? @map("end_date") @db.Date
  isActive    Boolean   @default(true) @map("is_active") @db.TinyInt
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime  @updatedAt @map("updated_at") @db.Timestamp(0)

  client    User @relation("ClientDietPlans", fields: [clientId], references: [id], onDelete: Cascade)
  dietitian User @relation("DietitianDietPlans", fields: [dietitianId], references: [id], onDelete: Cascade)

  @@index([clientId], map: "idx_client")
  @@index([isActive], map: "idx_active")
  @@map("diet_plans")
}

model ClientNote {
  id          Int      @id @default(autoincrement()) @db.UnsignedInt
  clientId    Int      @map("client_id") @db.UnsignedInt
  dietitianId Int      @map("dietitian_id") @db.UnsignedInt
  note        String   @db.Text
  isPrivate   Boolean  @default(true) @map("is_private") @db.TinyInt
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamp(0)

  client    User @relation("ClientNotes", fields: [clientId], references: [id], onDelete: Cascade)
  dietitian User @relation("DietitianNotes", fields: [dietitianId], references: [id], onDelete: Cascade)

  @@index([clientId, dietitianId], map: "idx_client_dietitian")
  @@map("client_notes")
}

enum ActivityLevel {
  sedentary
  light
  moderate
  active
  very_active
}

enum HealthGoal {
  lose_weight
  maintain
  gain_weight
  muscle_gain
  health
}

model ClientHealthInfo {
  id                  Int            @id @default(autoincrement()) @db.UnsignedInt
  clientId            Int            @unique @map("client_id") @db.UnsignedInt
  height              Decimal?       @db.Decimal(5, 2) /// cm
  currentWeight       Decimal?       @map("current_weight") @db.Decimal(5, 2) /// kg
  targetWeight        Decimal?       @map("target_weight") @db.Decimal(5, 2) /// kg
  birthDate           DateTime?      @map("birth_date") @db.Date
  gender              Gender?
  bloodType           String?        @map("blood_type") @db.VarChar(5)
  allergies           String?        @db.Text
  medications         String?        @db.Text
  chronicDiseases     String?        @map("chronic_diseases") @db.Text
  dietaryRestrictions String?        @map("dietary_restrictions") @db.Text
  activityLevel       ActivityLevel? @map("activity_level")
  goal                HealthGoal?
  notes               String?        @db.Text
  createdAt           DateTime       @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt           DateTime       @updatedAt @map("updated_at") @db.Timestamp(0)

  client User @relation(fields: [clientId], references: [id], onDelete: Cascade)

  @@map("client_health_info")
}

// ============================================
// BLOG/ARTICLE SYSTEM
// ============================================

enum ArticleStatus {
  draft
  pending
  approved
  rejected
  archived
}

model ArticleCategory {
  id          Int       @id @default(autoincrement()) @db.UnsignedInt
  parentId    Int?      @map("parent_id") @db.UnsignedInt
  name        String    @db.VarChar(255)
  slug        String    @unique @db.VarChar(255)
  description String?   @db.Text
  image       String?   @db.VarChar(255)
  sortOrder   Int       @default(0) @map("sort_order") @db.UnsignedInt
  isActive    Boolean   @default(true) @map("is_active") @db.TinyInt
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime  @updatedAt @map("updated_at") @db.Timestamp(0)

  parent   ArticleCategory?  @relation("CategoryHierarchy", fields: [parentId], references: [id], onDelete: SetNull)
  children ArticleCategory[] @relation("CategoryHierarchy")
  articles Article[]         @relation("ArticleCategories")

  @@index([slug], map: "idx_slug")
  @@index([isActive], map: "idx_active")
  @@map("article_categories")
}

model Article {
  id              Int           @id @default(autoincrement()) @db.UnsignedInt
  authorId        Int           @map("author_id") @db.UnsignedInt
  title           String        @db.VarChar(255)
  slug            String        @unique @db.VarChar(255)
  excerpt         String?       @db.Text
  content         String        @db.LongText
  featuredImage   String?       @map("featured_image") @db.VarChar(255)
  status          ArticleStatus @default(draft)
  rejectionReason String?       @map("rejection_reason") @db.Text
  isFeatured      Boolean       @default(false) @map("is_featured") @db.TinyInt
  viewsCount      Int           @default(0) @map("views_count") @db.UnsignedInt
  likesCount      Int           @default(0) @map("likes_count") @db.UnsignedInt
  metaTitle       String?       @map("meta_title") @db.VarChar(255)
  metaDescription String?       @map("meta_description") @db.Text
  metaKeywords    String?       @map("meta_keywords") @db.Text
  publishedAt     DateTime?     @map("published_at") @db.DateTime
  createdAt       DateTime      @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt       DateTime      @updatedAt @map("updated_at") @db.Timestamp(0)

  author     User             @relation(fields: [authorId], references: [id], onDelete: Cascade)
  categories ArticleCategory[] @relation("ArticleCategories")
  tags       ArticleTag[]     @relation("ArticleTags")
  likes      ArticleLike[]
  comments   ArticleComment[]

  @@index([slug], map: "idx_slug")
  @@index([status], map: "idx_status")
  @@index([isFeatured], map: "idx_featured")
  @@index([publishedAt], map: "idx_published")
  @@fulltext([title, content], map: "idx_search")
  @@map("articles")
}

model ArticleTag {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  name      String   @unique @db.VarChar(100)
  slug      String   @unique @db.VarChar(100)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)

  articles Article[] @relation("ArticleTags")

  @@index([slug], map: "idx_slug")
  @@map("article_tags")
}

model ArticleLike {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  articleId Int      @map("article_id") @db.UnsignedInt
  userId    Int      @map("user_id") @db.UnsignedInt
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)

  article Article @relation(fields: [articleId], references: [id], onDelete: Cascade)
  user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([articleId, userId], map: "unique_like")
  @@map("article_likes")
}

model ArticleComment {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  articleId Int      @map("article_id") @db.UnsignedInt
  userId    Int      @map("user_id") @db.UnsignedInt
  comment   String   @db.Text
  isApproved Boolean @default(false) @map("is_approved") @db.TinyInt
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)

  article Article @relation(fields: [articleId], references: [id], onDelete: Cascade)
  user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([articleId], map: "idx_article")
  @@map("article_comments")
}

// ============================================
// RECIPE SYSTEM
// ============================================

enum RecipeStatus {
  draft
  pending
  approved
  rejected
}

enum DifficultyLevel {
  easy
  medium
  hard
}

model RecipeCategory {
  id          Int      @id @default(autoincrement()) @db.UnsignedInt
  name        String   @db.VarChar(100)
  slug        String   @unique @db.VarChar(100)
  description String?  @db.Text
  image       String?  @db.VarChar(255)
  sortOrder   Int      @default(0) @map("sort_order") @db.UnsignedInt
  isActive    Boolean  @default(true) @map("is_active") @db.TinyInt
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamp(0)

  recipes Recipe[] @relation("RecipeCategories")

  @@index([slug], map: "idx_slug")
  @@map("recipe_categories")
}

model Recipe {
  id              Int             @id @default(autoincrement()) @db.UnsignedInt
  authorId        Int             @map("author_id") @db.UnsignedInt
  title           String          @db.VarChar(255)
  slug            String          @unique @db.VarChar(255)
  description     String?         @db.Text
  ingredients     String          @db.Text
  instructions    String          @db.Text
  prepTime        Int             @map("prep_time") @db.UnsignedInt /// Minutes
  cookTime        Int             @map("cook_time") @db.UnsignedInt /// Minutes
  servings        Int             @db.UnsignedInt
  difficulty      DifficultyLevel
  calories        Int?            @db.UnsignedInt
  protein         Decimal?        @db.Decimal(6, 2)
  carbs           Decimal?        @db.Decimal(6, 2)
  fat             Decimal?        @db.Decimal(6, 2)
  featuredImage   String?         @map("featured_image") @db.VarChar(255)
  images          String?         @db.Text /// JSON array
  status          RecipeStatus    @default(draft)
  rejectionReason String?         @map("rejection_reason") @db.Text
  isFeatured      Boolean         @default(false) @map("is_featured") @db.TinyInt
  viewsCount      Int             @default(0) @map("views_count") @db.UnsignedInt
  likesCount      Int             @default(0) @map("likes_count") @db.UnsignedInt
  publishedAt     DateTime?       @map("published_at") @db.DateTime
  createdAt       DateTime        @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt       DateTime        @updatedAt @map("updated_at") @db.Timestamp(0)

  author     User             @relation(fields: [authorId], references: [id], onDelete: Cascade)
  categories RecipeCategory[] @relation("RecipeCategories")
  likes      RecipeLike[]
  comments   RecipeComment[]

  @@index([slug], map: "idx_slug")
  @@index([status], map: "idx_status")
  @@index([isFeatured], map: "idx_featured")
  @@fulltext([title, ingredients], map: "idx_search")
  @@map("recipes")
}

model RecipeLike {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  recipeId  Int      @map("recipe_id") @db.UnsignedInt
  userId    Int      @map("user_id") @db.UnsignedInt
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)

  recipe Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([recipeId, userId], map: "unique_like")
  @@map("recipe_likes")
}

model RecipeComment {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  recipeId  Int      @map("recipe_id") @db.UnsignedInt
  userId    Int      @map("user_id") @db.UnsignedInt
  comment   String   @db.Text
  rating    Int?     @db.TinyInt
  isApproved Boolean @default(false) @map("is_approved") @db.TinyInt
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)

  recipe Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([recipeId], map: "idx_recipe")
  @@map("recipe_comments")
}

// ============================================
// REVIEW & RATING SYSTEM
// ============================================

model Review {
  id          Int      @id @default(autoincrement()) @db.UnsignedInt
  dietitianId Int      @map("dietitian_id") @db.UnsignedInt
  clientId    Int      @map("client_id") @db.UnsignedInt
  rating      Int      @db.TinyInt
  comment     String?  @db.Text
  isApproved  Boolean  @default(false) @map("is_approved") @db.TinyInt
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp(0)

  dietitian User @relation("DietitianReviews", fields: [dietitianId], references: [id], onDelete: Cascade)
  client    User @relation("ClientReviews", fields: [clientId], references: [id], onDelete: Cascade)

  @@index([dietitianId], map: "idx_dietitian")
  @@index([isApproved], map: "idx_approved")
  @@map("reviews")
}

// ============================================
// PAYMENT & COMMISSION
// ============================================

enum PaymentStatus {
  pending
  completed
  failed
  refunded
}

model Payment {
  id              Int           @id @default(autoincrement()) @db.UnsignedInt
  clientId        Int           @map("client_id") @db.UnsignedInt
  amount          Decimal       @db.Decimal(10, 2)
  currency        String        @default("TRY") @db.VarChar(3)
  status          PaymentStatus @default(pending)
  paymentMethod   String?       @map("payment_method") @db.VarChar(50)
  transactionId   String?       @unique @map("transaction_id") @db.VarChar(255)
  paymentProvider String?       @map("payment_provider") @db.VarChar(50)
  description     String?       @db.Text
  metadata        String?       @db.Text /// JSON
  paidAt          DateTime?     @map("paid_at") @db.DateTime
  createdAt       DateTime      @default(now()) @map("created_at") @db.Timestamp(0)

  client User @relation("ClientPayments", fields: [clientId], references: [id], onDelete: Cascade)

  @@index([clientId], map: "idx_client")
  @@index([status], map: "idx_status")
  @@map("payments")
}

enum CommissionStatus {
  pending
  paid
  cancelled
}

model Commission {
  id          Int              @id @default(autoincrement()) @db.UnsignedInt
  dietitianId Int              @map("dietitian_id") @db.UnsignedInt
  amount      Decimal          @db.Decimal(10, 2)
  rate        Decimal          @db.Decimal(4, 3)
  status      CommissionStatus @default(pending)
  paidAt      DateTime?        @map("paid_at") @db.DateTime
  notes       String?          @db.Text
  createdAt   DateTime         @default(now()) @map("created_at") @db.Timestamp(0)

  dietitian User @relation(fields: [dietitianId], references: [id], onDelete: Cascade)

  @@index([dietitianId], map: "idx_dietitian")
  @@index([status], map: "idx_status")
  @@map("commissions")
}

// ============================================
// NOTIFICATION SYSTEM
// ============================================

enum NotificationType {
  appointment_reminder
  appointment_cancelled
  message_received
  diet_plan_added
  review_received
  payment_received
  system
}

model Notification {
  id        Int              @id @default(autoincrement()) @db.UnsignedInt
  userId    Int              @map("user_id") @db.UnsignedInt
  type      NotificationType
  title     String           @db.VarChar(255)
  message   String           @db.Text
  data      String?          @db.Text /// JSON
  isRead    Boolean          @default(false) @map("is_read") @db.TinyInt
  readAt    DateTime?        @map("read_at") @db.DateTime
  createdAt DateTime         @default(now()) @map("created_at") @db.Timestamp(0)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, isRead], map: "idx_user_unread")
  @@map("notifications")
}

// ============================================
// MISC TABLES
// ============================================

model ContactMessage {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  name      String   @db.VarChar(255)
  email     String   @db.VarChar(255)
  phone     String?  @db.VarChar(20)
  subject   String   @db.VarChar(255)
  message   String   @db.Text
  isRead    Boolean  @default(false) @map("is_read") @db.TinyInt
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)

  @@index([isRead], map: "idx_read")
  @@map("contact_messages")
}

model PasswordReset {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  email     String   @db.VarChar(255)
  token     String   @db.VarChar(255)
  expiresAt DateTime @map("expires_at") @db.DateTime
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)

  @@index([email], map: "idx_email")
  @@index([token], map: "idx_token")
  @@map("password_resets")
}
